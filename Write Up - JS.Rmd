---
title: "Import and Export"
author: "Jin Hyuk Son"
date: "`r Sys.Date()`"
output:
  html_document:
    code_folding: hide
    number_sections: false
    toc: yes
    toc_depth: 3
    toc_float: yes
  pdf_document:
    toc: yes
    toc_depth: '3'
---

```{r setup, include=FALSE}
# Some of common RMD options (and the defaults) are: 
# include=T, eval=T, echo=T, results='hide'/'asis'/'markup',..., collapse=F, warning=T, message=T, error=T, cache=T, fig.width=6, fig.height=4, fig.dim=c(6,4) #inches, fig.align='left'/'center','right', 
knitr::opts_chunk$set(warning = F, message = F)
# Can globally set option for number display format.
options(scientific=T, digits = 3) 
# options(scipen=9, digits = 3) 
```

```{r load libraries}
library(ezids)
library(tidyverse)
```

### Data Description
```{r import_data}
rice_df <- read.csv("Rice Production Data.csv")
```
The dataset consists of global rice production records from 1960 to 2022. Each observation represents a country for a specific year, including annual rice production, population, and other relevant metrics. The data has `r nrow(rice_df)` observations and `r ncol(rice_df)` variables. The information is provided from Our World in Data's article "Agricultural Production: How much, and what types of food, do countries produce across the world?"
  
Of the 36 variables included in the dataset, we will be using 9 variables in our project: Country, Year, Production(t), Population, Land Use, Import(t), Export(t), Domestic Supply(t), and Supply Chain Waste(t). The names of the variables were modified for better comprehensibility. 
  
Displaying the first few observations:
```{r data_head}
rice_df_clean <- rice_df %>%
  select(Country, Year, Population,
         Production..t., Land.Use..ha.,
         Imports..t., Exports..t.,
         Domestic.supply..t., Supply.chain.waste..t.) %>%
  rename("Production" = "Production..t.",
         "Land_Use" = "Land.Use..ha.",
         "Imports(t)" = "Imports..t.",
         "Exports(t)" = "Exports..t.",
         "Domestic_Supply(t)" = "Domestic.supply..t.",
         "Supply_Chain_Waste(t)" = "Supply.chain.waste..t.")
xkabledplyhead(rice_df_clean, 3)

```

  
Displaying the summary of the dataset
```{r data_summary}
xkablesummary(rice_df_clean)
```
  
The timeline for the project will be 1980 to 2022. The Country variable consists of individual countries, Food and Agricultural Organizations of UN (FAO), continents, and the global total. We have created a categorical variable to identify countries.
```{r data_cleaning}
rice_df_clean <- rice_df_clean %>%
  filter(Year >= 1980) %>%
  mutate(area_type = case_when(
    str_detect(Country, "FAO") ~ "Region",
    str_detect(Country, "(?i)countries") ~ "Region",
    str_detect(Country, "European Union") ~ "Region",
    str_detect(Country, "World") ~ "World",
    Country %in% c("North America", "South America",
                   "Asia", "Africa", "Europe",
                   "Oceania", "Antarctica", "Melanesia") ~ "Continent",
    TRUE ~ "Country"
  ))
```














